<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Заменяет все вхождения строки поиска на строку замены</title>

 </head>
 <body><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.str-repeat.html">str_repeat</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.str-rot13.html">str_rot13</a></div>
 <div class="up"><a href="ref.strings.html">Обработка строк</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.str-replace" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">str_replace</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">str_replace</span> &mdash; <span class="dc-title">Заменяет все вхождения строки поиска на строку замены</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.str-replace-description">
  <h3 class="title">Описание</h3>
  <div class="methodsynopsis dc-description">
   <span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <span class="methodname"><strong>str_replace</strong></span>
    ( <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$search</code></span>
   , <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$replace</code></span>
   , <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$subject</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter reference">&$count</code></span>
  ] )</div>

  <p class="para rdfs-comment">
   Эта функция возвращает строку или массив, в котором все
   вхождения <code class="parameter">search</code> в <code class="parameter">subject</code>
   заменены на <code class="parameter">replace</code>.
  </p>
  <p class="para">
   Если не нужны сложные правила поиска/замены (например, регулярные
   выражения), использование этой функции предпочтительнее
   <span class="function"><a href="function.preg-replace.html" class="function">preg_replace()</a></span>.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.str-replace-parameters">
  <h3 class="title">Список параметров</h3>
  <p class="para">
   Если <code class="parameter">search</code> и <code class="parameter">replace</code>
   - массивы, то <span class="function"><strong>str_replace()</strong></span> использует каждое
   значение из соответствующего массива для поиска и замены в
   <code class="parameter">subject</code>. Если в массиве
   <code class="parameter">replace</code> меньше элементов, чем в
   <code class="parameter">search</code>, в качестве строки замены для
   оставшихся значений будет использована пустая строка.
   Если <code class="parameter">search</code> - массив, а
   <code class="parameter">replace</code> - строка, то
   эта строка замены будет использована для каждого элемента
   массива <code class="parameter">search</code>. Обратный случай смысла
   не имеет.
  </p>
  <p class="para">
   Если <code class="parameter">search</code> или
   <code class="parameter">replace</code> являются массивами, их элементы
   будут обработаны от первого к последнему.
  </p>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">search</code></dt>

     <dd>

      <p class="para">
       Искомое значение, также известное как <em class="emphasis">needle</em>
       (иголка). Для множества искомых значений можно использовать массив.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">replace</code></dt>

     <dd>

      <p class="para">
       Значение замены, будет использовано для замены искомых значений
       <code class="parameter">search</code>. Для множества значений можно использовать
       массив.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">subject</code></dt>

     <dd>

      <p class="para">
       Строка или массив, в котором производится поиск и замена,
       также известный как <em class="emphasis">haystack</em> (стог сена).
      </p>
      <p class="para">
       Если <code class="parameter">subject</code> является массивом, то поиск
       с заменой будет осуществляться над каждым элементом
       <code class="parameter">subject</code>, а результатом функции также
       будет являться массив.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">count</code></dt>

     <dd>

      <p class="para">
       Если передан, то будет установлен в количество произведенных замен.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.str-replace-returnvalues">
  <h3 class="title">Возвращаемые значения</h3>
  <p class="para">
   Эта функция возвращает строку или массив с замененными значениями.
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.str-replace-changelog">
  <h3 class="title">Список изменений</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>Версия</th>
       <th>Описание</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>5.0.0</td>
       <td>
        Добавлен параметр <code class="parameter">count</code>.
       </td>
      </tr>

      <tr>
       <td>4.3.3</td>
       <td>
        Поведение этой функции изменилось.
        В старых версиях существовала ошибка при одновременной
        передаче массивов в аргументах <code class="parameter">search</code> и
        <code class="parameter">replace</code>. Ошибка заключается в том, что
        пустые элементы массива <code class="parameter">search</code> пропускались
        без перемещения к следующему элементу массива
        <code class="parameter">replace</code>. Эта ошибка была исправлена
        в PHP 4.3.3. Если ваши скрипты использовали эту
        ошибку, то в них нужно удалить пустые элементы из массива
        search перед вызовом этой функции.
       </td>
      </tr>

      <tr>
       <td>4.0.5</td>
       <td>
        Большинство параметров теперь могут принимать тип <span class="type"><a href="language.types.array.html" class="type array">array</a></span>.
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.str-replace-examples">
  <h3 class="title">Примеры</h3>
  <p class="para">
   <div class="example" id="example-4913">
    <p><strong>Пример #1 Примеры использования <span class="function"><strong>str_replace()</strong></span></strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;присваивает&nbsp;&lt;body&nbsp;text='black'&gt;<br /></span><span style="color: #0000BB">$bodytag&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">"%body%"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"black"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"&lt;body&nbsp;text='%body%'&gt;"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;присваивает:&nbsp;Hll&nbsp;Wrld&nbsp;f&nbsp;PHP<br /></span><span style="color: #0000BB">$vowels&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"a"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"e"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"i"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"o"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"u"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"A"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"E"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"I"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"O"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"U"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$onlyconsonants&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #0000BB">$vowels</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"Hello&nbsp;World&nbsp;of&nbsp;PHP"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;присваивает:&nbsp;You&nbsp;should&nbsp;eat&nbsp;pizza,&nbsp;beer,&nbsp;and&nbsp;ice&nbsp;cream&nbsp;every&nbsp;day<br /></span><span style="color: #0000BB">$phrase&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"You&nbsp;should&nbsp;eat&nbsp;fruits,&nbsp;vegetables,&nbsp;and&nbsp;fiber&nbsp;every&nbsp;day."</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$healthy&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"fruits"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"vegetables"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"fiber"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$yummy&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"pizza"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"beer"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"ice&nbsp;cream"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$newphrase&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #0000BB">$healthy</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$yummy</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$phrase</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;присваивает:&nbsp;2<br /></span><span style="color: #0000BB">$str&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">"ll"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"good&nbsp;golly&nbsp;miss&nbsp;molly!"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$count</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">$count</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="example-4914">
    <p><strong>Пример #2 Примеры потенциальных трюков с <span class="function"><strong>str_replace()</strong></span></strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Порядок&nbsp;замены<br /></span><span style="color: #0000BB">$str&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"Строка&nbsp;1\nСтрока&nbsp;2\rСтрока&nbsp;3\r\nСтрока&nbsp;4\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$order&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"\r\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"\r"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$replace&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;Обрабатывает&nbsp;сначала&nbsp;\r\n&nbsp;для&nbsp;избежания&nbsp;их&nbsp;повторной&nbsp;замены.<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$newstr&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #0000BB">$order</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$replace</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$str</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Выводит&nbsp;F,&nbsp;т.к.&nbsp;A&nbsp;заменяется&nbsp;на&nbsp;B,&nbsp;затем&nbsp;B&nbsp;на&nbsp;C,&nbsp;и&nbsp;так&nbsp;далее...<br />//&nbsp;В&nbsp;итоге&nbsp;E&nbsp;будет&nbsp;заменено&nbsp;F,&nbsp;так&nbsp;как&nbsp;замена&nbsp;происходит&nbsp;слева&nbsp;направо.<br /></span><span style="color: #0000BB">$search&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'A'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'B'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'C'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'D'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'E'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$replace&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'B'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'C'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'D'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'E'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'F'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$subject&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'A'</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #0000BB">$search</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$replace</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$subject</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Выводит:&nbsp;яблорехкорех&nbsp;орех&nbsp;(по&nbsp;вышеуказанной&nbsp;причине)<br /></span><span style="color: #0000BB">$letters&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'я'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'о'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$fruit&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'яблоко'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'орех'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$text&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'я&nbsp;о'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$output&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #0000BB">$letters</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$fruit</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$text</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">$output</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.str-replace-notes">
  <h3 class="title">Примечания</h3>
  <blockquote class="note"><p><strong class="note">Замечание</strong>: <span class="simpara">Эта функция безопасна
для обработки данных в двоичной форме.</span></p></blockquote>
  <div class="caution"><strong class="caution">Предостережение</strong>
   <h1 class="title">Замечание о порядке замены</h1>
   <p class="para">
    Так как <span class="function"><strong>str_replace()</strong></span> осуществляет замену
    слева направо, то при использовании множественных замен
    она может заменить ранее вставленное значение на другое.
    Смотрите также примеры на этой странице.
   </p>
  </div>
  <blockquote class="note"><p><strong class="note">Замечание</strong>: 
   <p class="para">
    Эта функция чувствительна к регистру. Используйте
    <span class="function"><a href="function.str-ireplace.html" class="function">str_ireplace()</a></span> для замены, нечувствительной
    к регистру.
   </p>
  </p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.str-replace-seealso">
  <h3 class="title">Смотрите также</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.str-ireplace.html" class="function" rel="rdfs-seeAlso">str_ireplace()</a> - Регистро-независимый вариант функции str_replace</span></li>
    <li class="member"><span class="function"><a href="function.substr-replace.html" class="function" rel="rdfs-seeAlso">substr_replace()</a> - Заменяет часть строки</span></li>
    <li class="member"><span class="function"><a href="function.preg-replace.html" class="function" rel="rdfs-seeAlso">preg_replace()</a> - Выполняет поиск и замену по регулярному выражению</span></li>
    <li class="member"><span class="function"><a href="function.strtr.html" class="function" rel="rdfs-seeAlso">strtr()</a> - Преобразует заданные символы или заменяет подстроки</span></li>
   </ul>
  </p>
 </div>


</div><hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.str-repeat.html">str_repeat</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.str-rot13.html">str_rot13</a></div>
 <div class="up"><a href="ref.strings.html">Обработка строк</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
