<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Делаем что-нибудь полезное</title>

 </head>
 <body><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="tutorial.firstpage.html">Первая страница на PHP</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="tutorial.forms.html">Работа с формами</a></div>
 <div class="up"><a href="tutorial.html">Простой учебник</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="tutorial.useful" class="section">
   <div class="info"><h1 class="title">Делаем что-нибудь полезное</h1></div>
   <p class="para">
    Давайте сделаем что-нибудь полезное. К примеру, определим, какой
    браузер использует тот, кто смотрит в данный момент нашу страницу.
    Для этого мы проверим строку с именем браузера, посылаемую нам в
    HTTP-запросе. Эта информация хранится в <a href="language.variables.html" class="link">переменной</a>. Переменные в PHP всегда
    предваряются знаком доллара. Интересующая нас в данный момент переменная
    называется <var class="varname"><var class="varname"><a href="reserved.variables.server.html" class="classname">$_SERVER['HTTP_USER_AGENT']</a></var></var>.
   </p>
   <blockquote class="note"><p><strong class="note">Замечание</strong>: 
    <p class="para">
     <var class="varname"><var class="varname"><a href="reserved.variables.server.html" class="classname">$_SERVER</a></var></var> - специальная
     зарезервированная переменная PHP, которая содержит всю информацию,
     полученную от Web-сервера. Её также называют суперглобальной.
     Для более подробной информации смотрите раздел
     &quot;<a href="language.variables.superglobals.html" class="link">Суперглобальные
     переменные</a>&quot;. Эти специальные переменные появились в PHP, начиная
     с версии <a href="http://www.php.net/releases/4_1_0.php" class="link external">&raquo;&nbsp;4.1.0</a>.  До этого
     использовались массивы <var class="varname"><var class="varname">$HTTP_*_VARS</var></var>, такие как
     <var class="varname"><var class="varname">$HTTP_SERVER_VARS</var></var>. Несмотря на то,
     что эти массивы уже устарели, они до сих пор существуют (см. замечания по
     <a href="tutorial.oldcode.html" class="link">старым программам</a>).
    </p>
   </p></blockquote>
   <p class="para">
    Для вывода данной переменной мы сделаем так:
   </p>
   <p class="para">
    <div class="example" id="example-4">
     <div class="info"><p><strong>Пример #1 Вывод значения переменной (элемента массива)</strong></p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">'HTTP_USER_AGENT'</span><span style="color: #007700">];<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>
     Пример вывода данной программы:
    </p></div>
    <div class="example-contents screen"><br />
Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)<br />
    </div>
   </div>
   </p>
   <p class="para">
    В PHP сушествует огромное количество <a href="language.types.html" class="link">типов</a>
    переменных. В предыдущем примере мы печатали элемент
    <a href="language.types.array.html" class="link">массива</a>. Массивы
    могут быть очень полезны.
   </p>
   <p class="para">
    <var class="varname"><var class="varname"><a href="reserved.variables.server.html" class="classname">$_SERVER</a></var></var> - это просто одна из переменных, которые предоставляются
    вам языком PHP. Список таких переменных можно посмотреть в разделе
    &quot;<a href="reserved.variables.html" class="link">Зарезервированные переменные</a>&quot; или
    просмотрев вывод функции <span class="function"><a href="function.phpinfo.html" class="function">phpinfo()</a></span>, используемой в
    примере в предыдущем разделе.
   </p>
   <p class="para">
    Внутрь PHP-тегов можно помещать несколько выражений и создавать
    маленькие блоки кода, делающие больше, чем простой вызов echo.
    Например, если вы хотите добавить проверку для Internet Explorer,
    можно сделать так:
   </p>
   <p class="para">
    <div class="example" id="example-5">
     <div class="info"><p><strong>Пример #2 Пример использования <a href="language.control-structures.html" class="link">управляющих
     структур</a> и <a href="language.functions.html" class="link">функций</a></strong></p></div>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">strpos</span><span style="color: #007700">(</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">'HTTP_USER_AGENT'</span><span style="color: #007700">],&nbsp;</span><span style="color: #DD0000">'MSIE'</span><span style="color: #007700">)&nbsp;!==&nbsp;</span><span style="color: #0000BB">FALSE</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'Вы&nbsp;используете&nbsp;Internet&nbsp;Explorer.&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

     <div class="example-contents"><p>
      Пример вывода данной программы:
     </p></div>
     <div class="example-contents screen">
<div class="cdata"><pre>
Вы используете Internet Explorer.&lt;br /&gt;
</pre></div>
     </div>
    </div>
   </p>
   <p class="para">
    Здесь мы показали несколько новых элементов. Во-первых, здесь есть
    конструкция <a href="control-structures.if.html" class="link">if</a>.
    Если вы знакомы с основами синтаксиса языка C, то вы уже заметили что-то
    схожее. Если же вы не знаете C или подобного по синтаксису языка, то
    лучший вариант - взять какую-либо вводную книжку по PHP и прочитать
    первые пару глав. Другой вариант - почитать раздел &quot;<a href="langref.html" class="link">Описание языка</a>&quot;
    данного руководства.
   </p>
   <p class="para">
    Кроме этого, здесь присутствует вызов функции <span class="function"><a href="function.strpos.html" class="function">strpos()</a></span>.
    <span class="function"><a href="function.strpos.html" class="function">strpos()</a></span> - встроенная в PHP функция, которая ищет
    одну строку в другой. В данном случае мы ищем строку
    <em>&#039;MSIE&#039;</em> (так называемую &quot;иголку&quot; - needle)
    в <var class="varname"><var class="varname"><a href="reserved.variables.server.html" class="classname">$_SERVER['HTTP_USER_AGENT']</a></var></var> (в так называемом &quot;сене&quot;
    - haystack). Если &quot;иголка&quot; найдена внутри &quot;сена&quot;, функция возвращает
    позицию &quot;иголки&quot; относительно начала &quot;сена&quot;. В противном случае она возвращает <strong><code>FALSE</code></strong>.
    Если она не вернет <strong><code>FALSE</code></strong>, то условие в
    <a href="control-structures.if.html" class="link">if</a> окажется истинным (<strong><code>TRUE</code></strong>), и
    код в фигурных скобках ({ }) выполнится. В противном случае этот код
    не выполняется. Попробуйте создать аналогичные примеры с использованием
    команд <a href="control-structures.if.html" class="link">if</a>,
    <a href="control-structures.else.html" class="link">else</a> и других функций,
    таких, как <span class="function"><a href="function.strtoupper.html" class="function">strtoupper()</a></span> и <span class="function"><a href="function.strlen.html" class="function">strlen()</a></span>.
    Также подобные примеры содержатся во многих описаниях функций в данном руководстве.
    Если вы не знаете, как использовать функции, возможно, вам стоит
    прочесть страницу руководства о том, <a href="about.prototypes.html" class="link">
    как читать определения функций</a> и раздел о
    <a href="language.functions.html" class="link">функциях в PHP</a>.
   </p>
   <p class="para">
    Продемонстрируем, как можно входить в режим кода PHP и выходить из
    него даже прямо посередине блока с кодом:
   </p>
   <p class="para">
    <div class="example" id="example-6">
     <p><strong>Пример #3 Смешение режимов HTML и PHP</strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">strpos</span><span style="color: #007700">(</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">'HTTP_USER_AGENT'</span><span style="color: #007700">],&nbsp;</span><span style="color: #DD0000">'MSIE'</span><span style="color: #007700">)&nbsp;!==&nbsp;</span><span style="color: #0000BB">FALSE</span><span style="color: #007700">)&nbsp;{<br /></span><span style="color: #0000BB">?&gt;<br /></span>&lt;h3&gt;strpos(),&nbsp;должно&nbsp;быть,&nbsp;вернул&nbsp;не&nbsp;false&lt;/h3&gt;<br />&lt;p&gt;Вы&nbsp;используете&nbsp;Internet&nbsp;Explorer&lt;/p&gt;<br /><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">}&nbsp;else&nbsp;{<br /></span><span style="color: #0000BB">?&gt;<br /></span>&lt;h3&gt;strpos()&nbsp;вернул&nbsp;false&lt;/h3&gt;<br />&lt;p&gt;Вы&nbsp;не&nbsp;используете&nbsp;Internet&nbsp;Explorer&lt;/p&gt;<br /><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

     <div class="example-contents"><p>
      Пример вывода данной программы:
     </p></div>
     <div class="example-contents screen">
<div class="cdata"><pre>
&lt;h3&gt;strpos(), должно быть, вернул не false&lt;/h3&gt;
&lt;p&gt;Вы используете Internet Explorer&lt;/p&gt;
</pre></div>
     </div>
    </div>
   </p>
   <p class="para">
    Вместо использования команды PHP echo для вывода, мы вышли из режима
    кода и просто послали содержимое HTML. Важный момент здесь то, что логическая
    структура кода PHP при этом не теряется. Только одна HTML-часть будет
    послана клиенту в зависимости от результата функции
    <span class="function"><a href="function.strpos.html" class="function">strpos()</a></span> (другими словами, в зависимости от того,
    найдена была строка <em>MSIE</em> или нет).
   </p>
  </div><hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="tutorial.firstpage.html">Первая страница на PHP</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="tutorial.forms.html">Работа с формами</a></div>
 <div class="up"><a href="tutorial.html">Простой учебник</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
