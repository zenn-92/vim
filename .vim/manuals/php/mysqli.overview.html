<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Краткий обзор</title>

 </head>
 <body><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="intro.mysqli.html">Введение</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="mysqli.quickstart.html">Краткое руководство</a></div>
 <div class="up"><a href="book.mysqli.html">mysqli</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="mysqli.overview" class="chapter">

  <h1>Краткий обзор</h1>


  <p class="para">
    Этот раздел посвящен описанию инструментов для взаимодействия PHP приложений с
    базами данных MySQL.
  </p>

  <p class="para">
    <em class="emphasis">Что такое API?</em>
  </p>

  <p class="para">
    Интерфейс программирования приложений, или API, определяет набор классов,
    методов, функций и переменных, которые можно вызывать из вашего приложения
    для выполнения поставленных задач. Применительно к PHP приложениям, которые
    должны взаимодействовать с базами данных, необходимые для этого API, как
    правило, представлены PHP расширениями.
  </p>

  <p class="para">
    API могут быть процедурными или объектно-ориентированными. При использовании
    процедурных API вы вызываете функции для выполнения каких-либо операций, а
    в случае объектно-ориентированных вы инстанцируете классы и затем вызываете
    методы созданных объектов. Второй подход, обычно, предпочтительнее, так как
    он более современный и способствует написанию более организованного кода.
  </p>

  <p class="para">
    API MySQL предоставляет несколько способов подключения к базе
    данных из PHP приложения. В этом документе приводится описание этих способов
    и даются рекомендации, как выбрать наиболее подходящее решение в конкретной
    ситуации.
  </p>

  <p class="para">
    <em class="emphasis">Что такое Коннектор?</em>
  </p>

  <p class="para">
    В документации MySQL термин <em class="emphasis">коннектор (connector)</em> относится к
    части программного обеспечения, отвечающей за подключение к серверу MySQL.
    MySQL предоставляет множество коннекторов для различных языков
    программирования, в частности для PHP.
  </p>

  <p class="para">
    Для обеспечения взаимодействия PHP приложения с сервером баз данных вам
    необходимо написать PHP код, выполняющий подключение к серверу, выполнение
    запросов к базе данных и тому подобные операции. От программного обеспечения
    сервера требуется предоставить API, которое ваше PHP приложение сможет
    использовать, а также функционал, ответственный за взаимодействие вашего
    приложения с сервером. Программное обеспечение, реализующее такой функционал,
    обычно называют коннектором, так как оно позволяет вашему приложению
    подключиться (<em class="emphasis">to connect</em>) к серверу баз данных. В ряде
    случаев коннектор для своих нужд может потребовать дополнительные библиотеки.
  </p>

  <p class="para">
    <em class="emphasis">Что такое драйвер?</em>
  </p>

  <p class="para">
    Драйвером называется часть программного обеспечения, отвечающая за
    взаимодействие приложения с конкретным типом серверов баз данных. Драйвер
    также может обращаться к внешним библиотекам, таким как клиентская библиотека
    MySQL или нативный драйвер MySQL. Эти библиотеки реализуют низкоуровневый
    протокол взаимодействия с сервером MySQL.
  </p>

  <p class="para">
    В качестве примера можно привести уровень абстракции для работы с базами данных
    <a href="mysqli.overview.html#mysqli.overview.pdo" class="link">Объекты данных PHP (PDO)</a>, который
    может использовать один из нескольких драйверов, специфичных для конкретных
    баз данных. В качестве такого драйвера может выступать драйвер PDO MYSQL,
    который позволяет PDO взаимодействовать с MySQL сервером.
  </p>

  <p class="para">
    Иногда, люди употребляют термины коннектор и драйвер, как синонимы, и это
    может сбить с толку. В документации MySQL термин "<span class="quote">драйвер</span>"
    означает участок программного кода, входящий в состав коннектора и отвечающий
    за связь с конкретной СУБД.
  </p>

  <p class="para">
    <em class="emphasis">Что такое расширение?</em>
  </p>

  <p class="para">
    В документации к PHP вы будете неоднократно сталкиваться с термином
    <em class="emphasis">расширение</em>. Код PHP как такового состоит из ядра и
    присоединенных к нему необязательных расширений, которые увеличивают круг
    задач, которые может выполнять ядро. Относящиеся к MySQL расширения, такие
    как <em>mysqli</em> и <em>mysql</em>, взаимодействуют с
    ядром с помощью фреймворка PHP расширений.
  </p>

  <p class="para">
    Обычно, расширения предоставляют свой API-интерфейс PHP программисту, чтобы
    тот мог программно использовать возможности расширения. Однако, некоторые
    расширения, использующие фреймворк PHP расширений, не предоставляют
    программистам никаких интерфейсов.
  </p>

  <p class="para">
    Драйвер PDO MySQL, например, не предоставляет своего API. Он предоставляет
    интерфейс только абстрактному слою PDO, лежащему выше.
  </p>

  <p class="para">
    Термины API и расширение нельзя воспринимать как синонимы, так как расширение
    может и не предоставлять API программисту.
  </p>

  <p class="para">
    <em class="emphasis">
     Какие инструменты для работы с MySQL предлагает PHP API?
    </em>
  </p>

  <p class="para">
    API предоставляет на выбор три набора инструментов для подключения к серверу
    баз данных MySQL:
  </p>

  <ul class="itemizedlist">

    <li class="listitem">
      <p class="para">
        Расширение PHP MySQL
      </p>
    </li>

    <li class="listitem">
      <p class="para">
        Расширение PHP mysqli
      </p>
    </li>

    <li class="listitem">
      <p class="para">
        Объекты данных PHP (PDO)
      </p>
    </li>

  </ul>

  <p class="para">
    Каждый из них имеет свои достоинства и недостатки. Целью данного обзора
    является краткое описание ключевых особенностей каждого API.
  </p>

  <p class="para">
    <em class="emphasis">Что такое расширение PHP MySQL?</em>
  </p>

  <p class="para">
    Это оригинальное расширение позволяет разрабатывать PHP приложения, которые
    могут взаимодействовать с базой данных MySQL. Расширение
    <em>mysql</em> предоставляет процедурный интерфейс и предназначено
    для использования с MySQL версии 4.1.3 или более ранними версиями. Его также можно использовать
    и с более свежими версиями СУБД, но в этом случае многие возможности сервера,
    появившиеся после версии 4.1.3, будут недоступны программисту.
  </p>

  <blockquote class="note"><p><strong class="note">Замечание</strong>: 
    <p class="para">
      Если вы работаете с сервером MySQL 4.1.3 или более поздних версий,
      <em class="emphasis">настоятельно</em> рекомендуется использовать
      расширение <em>mysqli</em>.
    </p>
  </p></blockquote>

  <p class="para">
    Исходные коды расширения <em>mysql</em> расположены в директории
    расширений PHP <var class="filename">ext/mysql</var>.
  </p>

  <p class="para">
    Дополнительную информацию о расширении <em>mysql</em> можно
    почерпнуть из ресурса <a href="book.mysql.html" class="xref">Mysql</a>.
  </p>

  <p class="para">
    <em class="emphasis">
     Что такое PHP расширение mysqli?
    </em>
  </p>

  <p class="para">
    Расширение <em>mysqli</em>, или как его еще называют
    <em class="emphasis">улучшенное (improved)</em> MySQL расширение, было разработано,
    чтобы дать возможность программистам в полной мере воспользоваться
    функционалом MySQL сервера версий 4.1.3 и выше. Расширение
    <em>mysqli</em> включается в поставку PHP версий 5 и выше.
  </p>

  <p class="para">
    <em>mysqli</em> имеет ряд преимуществ и усовершенствований
    по сравнению с <em>mysql</em>, которые заключаются в следующем:

    <ul class="itemizedlist">

      <li class="listitem">
        <p class="para">
          Объектно-ориентированный интерфейс
        </p>
      </li>

      <li class="listitem">
        <p class="para">
          Поддержка подготавливаемых запросов
        </p>
      </li>

      <li class="listitem">
        <p class="para">
          Поддержка мультизапросов
        </p>
      </li>

      <li class="listitem">
        <p class="para">
          Поддержка транзакций
        </p>
      </li>

      <li class="listitem">
        <p class="para">
          Улучшенные возможности отладки
        </p>
      </li>

      <li class="listitem">
        <p class="para">
          Поддержка встроенного сервера
        </p>
      </li>

    </ul>
  </p>

  <blockquote class="note"><p><strong class="note">Замечание</strong>: 
    <p class="para">
      При работе с MySQL версий 4.1.3 и выше <em class="emphasis">настоятельно</em>
      рекомендуется использовать именно это расширение.
    </p>
  </p></blockquote>

  <p class="para">
    Наравне с объектно-ориентированным расширение предоставляет и процедурный
    интерфейс.
  </p>

  <p class="para">
    Расширение <em>mysqli</em> собирается при помощи фреймворка
    расширений PHP, его исходный код расположен в директории
    <var class="filename">ext/mysqli</var>.
  </p>

  <p class="para">
    За дополнительной информацией о расширении <em>mysqli</em>,
    обращайтесь к разделу <a href="book.mysqli.html" class="xref">mysqli</a>.
  </p>

  <p class="para" id="mysqli.overview.pdo">
    <em class="emphasis">Что такое PDO?</em>
  </p>

  <p class="para">
    Объекты данных PHP, или PDO, представляют из себя абстракцию коннектора
    баз данных для PHP приложений. PDO предоставляет API интерфейс взаимодействия
    с базой данных, не зависящий от конкретной СУБД. Теоретически, при
    использовании PDO можно поменять сервер баз данных, например с Firebird
    на MySQL, и это приведет лишь к незначительным изменениям в PHP коде.
  </p>

  <p class="para">
    В качестве других подобных абстракций можно привести JDBC для Java приложений
    и DBI для Perl.
  </p>

  <p class="para">
    Наряду с преимуществами PDO, такими как простота и переносимость API, есть
    его главный недостаток: PDO поддерживает не все возможности сервера баз
    данных, доступные в последних версиях MySQL. Например, средствами PDO нельзя
    создавать множественные запросы, хотя MySQL их и поддерживает.
  </p>

  <p class="para">
    PDO собирается при помощи фреймворка расширений PHP, его исходный код
    расположен в директории <var class="filename">ext/pdo</var>.
  </p>

  <p class="para">
    Дополнительную информацию о PDO см. в разделе
    <a href="book.pdo.html" class="xref">PDO</a>.
  </p>

  <p class="para">
    <em class="emphasis">Что такое драйвер PDO MYSQL?</em>
  </p>

  <p class="para">
    Дравер PDO MYSQL не является API как таковым, во всяком случае с точки зрения
    программиста. Драйвер PDO MYSQL располагается между самим PDO и сервером 
    MySQL. Программист вызывает функции интерфейса PDO API, а PDO в свою очередь
    использует драйвер PDO MYSQL для обмена данными и командами с сервером MySQL.
  </p>

  <p class="para">
    Драйвер PDO MYSQL лишь один из многих PDO драйверов. Для большинства СУБД есть
    свои PDO драйверы, как например драйверы для Firebird или PostgreSQL серверов.
  </p>

  <p class="para">
    Драйвер PDO MYSQL собирается при помощи фреймворка расширений PHP, его исходный код
    расположен в директории <var class="filename">ext/pdo_mysql</var>. Он не предоставляет
    API-интерфейс программисту PHP.
  </p>

  <p class="para">
    Дополнительно о драйвере PDO MYSQL можно прочитать в разделе
    <a href="ref.pdo-mysql.html" class="xref">MySQL (PDO)</a>.
  </p>

  <p class="para" id="mysqli.overview.mysqlnd">
    <em class="emphasis">Что такое нативный дравер MySQL для PHP?</em>
  </p>

  <p class="para">
    Чтобы обеспечить взаимодействие с сервером MySQL, расширения
    <em>mysql</em> и <em>mysqli</em>, а также драйвер
    PDO MYSQL используют низкоуровневую библиотеку, в которой реализованы
    необходимые протоколы. В прошлом была доступна только одна такая библиотека:
    Клиентская библиотека MySQL (MySQL Client Library), также известная как
    <em>libmysql</em>.
  </p>

  <p class="para">
    Однако, интерфейс, который предоставляла <em>libmysql</em>, не был
    оптимизирован для взаимодействия с PHP приложениями, так как изначально
    <em>libmysql</em> разрабатывалась для работы с С приложениями.
    Несколько позже был разработан нативный драйвер MySQL (MySQL Native Driver)
    <em>mysqlnd</em>, который представляет собой альтернативу
    <em>libmysql</em> для PHP.
  </p>

  <p class="para">
    Каждое из расширений <em>mysql</em> или
    <em>mysqli</em>, а также драйвер PDO MySQL можно индивидуально
    настроить для работы либо с <em>libmysql</em>, либо с
    <em>mysqlnd</em>. Так как <em>mysqlnd</em> создавался
    специально для PHP систем, у него есть преимущество в скорости и расходах
    памяти перед <em>libmysql</em>. Поэтому его использование
    предпочтительней.
  </p>

  <blockquote class="note"><p><strong class="note">Замечание</strong>: 
    <p class="para">
      Нативный драйвер MySQL может использоваться только с MySQL версии 4.1.3 и
      выше.
    </p>
  </p></blockquote>

  <p class="para">
    Нативный драйвер MYSQL собирается при помощи фреймворка расширений PHP, его
    исходный код расположен в директории <var class="filename">ext/mysqlnd</var>. Он
    не предоставляет API-интерфейс программисту PHP.
  </p>



  <p class="para">
    <em class="emphasis">Сравнение возможностей</em>
  </p>

  <p class="para">
    В приведенной таблице приводится сравнение функционала трех основных методов
    подключения к MySQL из PHP:
  </p>

  <table class="doctable informaltable">
    
      <col width="25*" />
      <col width="25*" />
      <col width="25*" />
      <col width="25*" />
      <thead>
        <tr>
          <th class="empty">&nbsp;</th>
          <th>Расширение PHP mysqli</th>
          <th>PDO (Используя драйвер PDO MySQL и нативный драйвер MySQL)</th>
          <th>Расширение PHP MySQL</th>
        </tr>

      </thead>

      <tbody class="tbody">
        <tr>
          <td>Версия PHP, в которой был внедрен функционал</td>
          <td>5.0</td>
          <td>5.0</td>
          <td>До 3.0</td>
        </tr>

        <tr>
          <td>Включено в PHP 5.x</td>
          <td>Да</td>
          <td>Да</td>
          <td>Да</td>
        </tr>

        <tr>
          <td>Статус разработки MySQL</td>
          <td>Разработка продолжается</td>
          <td>Разработка продолжается по состоянию на PHP 5.3</td>
          <td>Только поддержка</td>
        </tr>

        <tr>
          <td>Рекомендовано MySQL для разработки новых проектов</td>
          <td>Да - отдается предпочтение</td>
          <td>Да</td>
          <td>Нет</td>
        </tr>

        <tr>
          <td>API поддерживает наборы символов</td>
          <td>Да</td>
          <td>Да</td>
          <td>Нет</td>
        </tr>

        <tr>
          <td>API поддерживает подготавливаемые запросы на стороне сервера</td>
          <td>Да</td>
          <td>Да</td>
          <td>Нет</td>
        </tr>

        <tr>
          <td>API поддерживает подготавливаемые запросы на стороне клиента</td>
          <td>Нет</td>
          <td>Да</td>
          <td>Нет</td>
        </tr>

        <tr>
          <td>API поддерживает хранимые процедуры</td>
          <td>Да</td>
          <td>Да</td>
          <td>Нет</td>
        </tr>

        <tr>
          <td>API поддерживает множественные запросы</td>
          <td>Да</td>
          <td>По большей части</td>
          <td>Нет</td>
        </tr>

        <tr>
          <td>Поддержка всего функционала MySQL 4.1+</td>
          <td>Да</td>
          <td>По большей части</td>
          <td>Нет</td>
        </tr>

      </tbody>
    
  </table>


</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="intro.mysqli.html">Введение</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="mysqli.quickstart.html">Краткое руководство</a></div>
 <div class="up"><a href="book.mysqli.html">mysqli</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
