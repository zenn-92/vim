<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Экранирующие последовательности</title>

 </head>
 <body><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="regexp.reference.meta.html">Метасимволы</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="regexp.reference.unicode.html">Свойства Unicode-символов</a></div>
 <div class="up"><a href="reference.pcre.pattern.syntax.html">Описание синтаксиса Perl-совместимых регулярных выражений</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="regexp.reference.escape" class="section">
  <h2 class="title">Экранирующие последовательности</h2>
  <p class="para">
   Обратная косая черта (&#039;\&#039;) имеет несколько применений. Прежде всего, если она
   предшествует не буквенно-цифровому символу, она снимает с него специальное значение,
   которое он мог иметь. Применение обратной косой черты как экранирующего символа
   допустимо как в символьном классе, так и вне него.
  </p>
  <p class="para">
   Например, если вы хотите задать соответствие символу &quot;*&quot;,
   в шаблоне необходимо указать &quot;\*&quot;. Это предотвратит трактование последующего символа
   как метасимвола с особым значением. Всегда безопасно экранировать
   не буквенно-цифровые символы с помощью &quot;\&quot;, если вы хотите убедиться,
   что они означают в шаблоне самих себя. В частном случае для сопоставления
   с самим символом обратной косой черты, используйте запись &quot;\\&quot;.
  </p>
  <blockquote class="note"><p><strong class="note">Замечание</strong>: 
   <p class="para">
    <a href="language.types.string.html#language.types.string.syntax" class="link">PHP-cтроки</a>, заключенные
    в одинарные и двойные кавычки интерпретируют обратную косую черту по-разному.
    Поэтому, если необходимо совпадение \ с регулярным выражением \\,
    в PHP-коде нужно использовать &quot;\\\\&quot; или &#039;\\\\&#039;.
   </p>
  </p></blockquote>
  <p class="para">
   В случае, если указан модификатор
   <a href="reference.pcre.pattern.modifiers.html" class="link">PCRE_EXTENDED</a>,
   пробельные символы в шаблоне (вне описания символьного класса) игнорируются.
   Также игнорируется часть строки, находящаяся между символом &quot;#&quot;
   (опять же, не участвующем в описании символьного класса)
   и следующим символом перевода строки. В таком случае обратный слэш можно применять
   как экранирующий символ для указания вхождений пробельных символов
   или символа &quot;#&quot; в шаблоне.
  </p>
  <p class="para">
    Второе применение обратного слэша заключается в том, что он позволяет использовать
    непечатные символы в видимой форме в описании шаблона.
    При том, что в PCRE нет ограничений на использование непечатных символов
    (исключая бинарный ноль, который интерпретируется как конец шаблона),
    при редактировании программного кода в каком-либо текстовом редакторе
    гораздо удобнее использовать следующие комбинации, чем реальные символы, которые
    они представляют:
  </p>
  <p class="para">
   <dl>

    
     <dt>
<em class="emphasis">\a</em></dt>

     <dd>

      <span class="simpara">символ оповещения, сигнал, (BEL, шестнадцатиричный код 07)</span>
     </dd>

    
    
     <dt>
<em class="emphasis">\cx</em></dt>

     <dd>

      <span class="simpara">&quot;Ctrl+x&quot;, где x - произвольный символ</span>
     </dd>

    
    
     <dt>
<em class="emphasis">\e</em></dt>

     <dd>

      <span class="simpara">escape (шестнадцатеричный код 1B)</span>
     </dd>

    
    
     <dt>
<em class="emphasis">\f</em></dt>

     <dd>

      <span class="simpara">разрыв страницы (шестнадцатиричный код 0C)</span>
     </dd>

    
    
     <dt>
<em class="emphasis">\n</em></dt>

     <dd>

      <span class="simpara">перевод строки (шестнадцатиричный код 0A)</span>
     </dd>

    
    
     <dt>
<em class="emphasis">\p{xx}</em></dt>

     <dd>

      <span class="simpara">
       символ со свойством xx, подробнее смотрите
       <a href="regexp.reference.unicode.html" class="link">свойства unicode</a>
      </span>
     </dd>

    
    
     <dt>
<em class="emphasis">\P{xx}</em></dt>

     <dd>

      <span class="simpara">
       символ без свойства xx, подробнее смотрите
       <a href="regexp.reference.unicode.html" class="link">свойства unicode</a>
      </span>
     </dd>

    
    
     <dt>
<em class="emphasis">\r</em></dt>

     <dd>

      <span class="simpara">возврат каретки (шестнадцатиричный код 0D)</span>
     </dd>

    
    
     <dt>
<em class="emphasis">\t</em></dt>

     <dd>

      <span class="simpara">табуляция (шестнадцатиричный код 09)</span>
     </dd>

    
    
     <dt>
<em class="emphasis">\xhh</em></dt>

     <dd>

      <span class="simpara">
       символ с шестнадцатиричным кодом hh
      </span>
     </dd>

    
    
     <dt>
<em class="emphasis">\ddd</em></dt>

     <dd>

      <span class="simpara">символ с восьмеричным кодом ddd, либо ссылка на подмаску</span>
     </dd>

    
   </dl>

  </p>
  <p class="para">
   Если быть более точным, комбинация &quot;<em>\cx</em>&quot; интерпретируется
   следующим образом: если &quot;<em>x</em>&quot; - символ нижнего регистра,
   он преобразуется в верхний регистр.
   После этого шестой бит символа (шестнадцатеричный код 40) инвертируется.
   Таким образом &quot;<em>\cz</em>&quot; интерпретируется как шестнадцатеричное
   значение 1A, в то время как &quot;<em>\c{</em>&quot; получает шестнадцатиричное
   значение 3B, а &quot;<em>\c;</em>&quot; - 7B.
  </p>
  <p class="para">
   После &quot;<em>\x</em>&quot; считываются еще две шестнадцатиричные цифры
   (они могут быть записаны в нижнем или верхнем регистре).
   В <em class="emphasis">режиме UTF-8</em>, разрешается использование
   &quot;<em>\x{...}</em>&quot;, где содержимое скобок является строкой
   из шестнадцатеричных цифр. Она интерпретируется как символ UTF-8 character с кодом,
   совпадающим с данным шестнадцатеричным числом.
   Исходная шестнадцатеричная экранирующая последовательность,
   <em>\xhh</em>, совпадает с двухбайтным UTF-8 символом, если его значение
   превышает 127.
  </p>
  <p class="para">
   После  &quot;<em>\0</em>&quot; считываются две восьмеричные цифры.
   Если в записи менее двух цифр, будут использованы
   все фактически присутствующие цифры. Таким образом, последовательность
   &quot;<em>\0\x\07</em>&quot; будет интерпретирована как два бинарных нуля,
   за которыми следует символ оповещения (звонок). В случае, если вы используете
   представление числа в восьмеричном коде, убедитесь, что за
   начальным нулем следуют две значащие цифры.
  </p>
  <p class="para">
   Обработка обратного слэша, за которым следует ненулевая цифра, несколько сложнее.
   Вне символьного класса PCRE воспринимает обратный слэш и следующие за ним цифры
   как десятичное число. Если полученное значение меньше десяти,
   либо если шаблон содержит по меньшей мере такое же количество предшествующих
   текущей позиции подмасок, вся конструкция интерпретируется как
   <em class="emphasis">ссылка на подмаску</em>.
   Более детальное описание будет приведено ниже при обсуждении механизма работы подмасок.
  </p>
  <p class="para">
   Внутри символьного класса, либо если полученное значение больше 9 и соответствующее
   количество предшествующих подмасок отсутствует, PCRE считывает до трех восьмеричных
   цифр, следующих за обратным слэшем, и генерирует один байт из последних 8-ми
   значащих битов полученного значения. Все последующие цифры обозначают себя же. Например:
  </p>
  <p class="para">
   <dl>

    
     <dt>
<em class="emphasis">\040</em></dt>

     <dd>
<span class="simpara">еще один способ записи пробела</span></dd>

    
    
     <dt>
<em class="emphasis">\40</em></dt>

     <dd>

      <span class="simpara">
       то же самое в случае, если данной записи предшествует менее сорока подмасок
      </span>
     </dd>

    
    
     <dt>
<em class="emphasis">\7</em></dt>

     <dd>
<span class="simpara">всегда интерпретируется как ссылка на подмаску</span></dd>

    
    
     <dt>
<em class="emphasis">\11</em></dt>

     <dd>

      <span class="simpara">
       может быть как обратной ссылкой, так и альтернативной записью символа табуляции
      </span>
     </dd>

    
    
     <dt>
<em class="emphasis">\011</em></dt>

     <dd>
<span class="simpara">всегда интерпретируется как символ табуляции</span></dd>

    
    
     <dt>
<em class="emphasis">\0113</em></dt>

     <dd>
<span class="simpara">символ табуляции, за которым следует цифра &quot;3&quot;</span></dd>

    
    
     <dt>
<em class="emphasis">\113</em></dt>

     <dd>

      <span class="simpara">
       интерпретируется как символ с восьмеричным кодом 113 (так как ссылок на подмаски не может быть более чем 99)
      </span>
     </dd>

    
    
     <dt>
<em class="emphasis">\377</em></dt>

     <dd>
<span class="simpara">байт, всецело состоящий из единичных битов</span></dd>

    
    
     <dt>
<em class="emphasis">\81</em></dt>

     <dd>

      <span class="simpara">
       либо обратная ссылка, либо бинарный ноль, за которым следуют цифры &quot;8&quot; и &quot;1&quot;
      </span>
     </dd>

    
   </dl>

  </p>
  <p class="para">
   Следует помнить, что восьмеричные значения, превышающие 100, следует писать без
   лидирующего нуля, так как читается не более трех восьмеричных цифр.
  </p>
  <p class="para">
   Все последовательности, определяющие однобайтное значение, могут встречаться
   как внутри, так и вне символьных классов. Кроме того, внутри символьного класса
   запись &quot;<em>\b</em>&quot; интерпретируется как символ возврата
   (&#039;backspace&#039;, шестнадцатеричный код 08). Вне символьного класса она имеет
   другое значение (какое именно, описано ниже).
  </p>
  <p class="para">
   Третье использование обратного слэша - указание общего типа символов:
  </p>
  <p class="para">
   <dl>

    
     <dt>
<em class="emphasis">\d</em></dt>

     <dd>
<span class="simpara">любая десятичная цифра</span></dd>

    
    
     <dt>
<em class="emphasis">\D</em></dt>

     <dd>
<span class="simpara">любой символ, кроме десятичной цифры</span></dd>

    
    
     <dt>
<em class="emphasis">\h</em></dt>

     <dd>
<span class="simpara">любой горизонтальный пробельный символ (начиная с версии PHP 5.2.4)</span></dd>

    
    
     <dt>
<em class="emphasis">\H</em></dt>

     <dd>
<span class="simpara">любой символ, не являющийся горизонтальным пробельным символом (начиная с версии PHP 5.2.4)</span></dd>

    
    
     <dt>
<em class="emphasis">\s</em></dt>

     <dd>
<span class="simpara">любой пробельный символ</span></dd>

    
    
     <dt>
<em class="emphasis">\S</em></dt>

     <dd>
<span class="simpara">любой непробельный символ</span></dd>

    
    
     <dt>
<em class="emphasis">\v</em></dt>

     <dd>
<span class="simpara">любой вертикальный пробельный символ (начиная с версии PHP 5.2.4)</span></dd>

    
    
     <dt>
<em class="emphasis">\V</em></dt>

     <dd>
<span class="simpara">любой символ, не являющийся вертикальным пробельным символом (начиная с версии PHP 5.2.4)</span></dd>

    
    
     <dt>
<em class="emphasis">\w</em></dt>

     <dd>
<span class="simpara">Любой символ, образующий &quot;слово&quot;</span></dd>

    
    
     <dt>
<em class="emphasis">\W</em></dt>

     <dd>
<span class="simpara">Любой символ, не образующий &quot;слово&quot;</span></dd>

    
   </dl>

  </p>
  <p class="para">
   Каждая пара таких специальных последовательностей делит полное множество
   всех символов на два непересекающихся множества.
   Любой символ соответствует одному и только одному множеству из пары.
  </p>
  <p class="para">
   Символ, образующий &quot;слово&quot; - это произвольная цифра, буква или символ подчеркивания,
   проще говоря, любой символ, который может являться частью
   &quot;<em class="emphasis">слова</em>&quot; в Perl. Определение букв и цифр управляется
   символьными таблицами, с которыми была собрана PCRE. И, как следствие, эти наборы
   могут отличаться в различных локализированных дистрибутивах.
   Например, в локали &quot;fr&quot; (Франция) некоторые символы с кодом выше 128 используются
   для записи ударных символов и, соответственно, соответствуют маске <em>\w</em>.
  </p>
  <p class="para">
   Описанные выше типы символов могут применяться как внутри, так и вне символьных
   классов, и соответствуют одному символу данного типа. Если текущая точка
   сравнения находится в конце строки, ни один из них не сможет совпасть, так как
   нет символа, с которым могло бы произойти совпадение.
  </p>
  <p class="para">
   Четвертое использование обратного слэша - определение некоторых формальных утверждений,
   описывающих условия касательно месторасположения особых позиций в строке
   и совершенно не затрагивающих сами символы. Использование подмасок как более
   сложных формальных утверждений описано ниже.
   Такими управляющими последовательностями являются:
  </p>
  <p class="para">
   <dl>

    
     <dt>
<em class="emphasis">\b</em></dt>

     <dd>
<span class="simpara">граница слова</span></dd>

    
    
     <dt>
<em class="emphasis">\B</em></dt>

     <dd>
<span class="simpara">не является границей слова</span></dd>

    
    
     <dt>
<em class="emphasis">\A</em></dt>

     <dd>
<span class="simpara">начало данных (независимо от многострочного режима)</span></dd>

    
    
     <dt>
<em class="emphasis">\Z</em></dt>

     <dd>

      <span class="simpara">
       конец данных либо позиция перед последним переводом строки (независимо от многострочного режима)
      </span>
     </dd>

    
    
     <dt>
<em class="emphasis">\z</em></dt>

     <dd>
<span class="simpara">конец данных (независимо от многострочного режима)</span></dd>

    
    
     <dt>
<em class="emphasis">\G</em></dt>

     <dd>
<span class="simpara">первая совпадающая позиция в строке</span></dd>

    
   </dl>

  </p>
  <p class="para">
   Описанные выше последовательности не могут встречаться в символьных классах
   (исключая комбинацию &quot;<em>\b</em>&quot;, которая внутри класса означает
   символ возврата &#039;backspace&#039;).
  </p>
  <p class="para">
   Границей слова считается такая позиция в строке, в которой из текущего и
   последующего символа только один соответствует <em>\w</em> или
   <em>\W</em> (т.е. один из них соответствует <em>\w</em>,
   а другой <em>\W</em>). Начало или конец строки также соответствуют
   границе слова в случае, если первый или, соответственно, последний символ совпадает
   с <em>\w</em>.
  </p>
  <p class="para">
   Специальные последовательности <em>\A</em>, <em>\Z</em> и
   <em>\z</em> отличаются от общеупотребляемых метасимволов начала строки
   &#039;^&#039; и конца строки &#039;$&#039; (описанных ниже) тем, что они всегда совпадают либо
   в самом начале либо в самом конце строки.
   На них никак не влияют опции
   <a href="reference.pcre.pattern.modifiers.html" class="link">PCRE_MULTILINE</a> и
   <a href="reference.pcre.pattern.modifiers.html" class="link">PCRE_DOLLAR_ENDONLY</a>.
   Разница между <em>\Z</em> и <em>\z</em> в том,
   что <em>\Z</em> соответствует позиции перед последним символом
   в случае, если последний символ - перевод строки, кроме самого конца строки.
   В то время, как <em>\z</em> соответствует исключительно концу данных.
  </p>
  <p class="para">
   Утверждение <em>\G</em> является истинным только в том случае,
   если текущая проверяемая позиция находится в начале совпадения, указанного
   параметром <code class="parameter">offset</code> функции <span class="function"><a href="function.preg-match.html" class="function">preg_match()</a></span>.
   Она отличается от <em>\A</em> при ненулевом значении параметра
   <code class="parameter">offset</code>.
  </p>

  <p class="para">
   <em>\Q</em> и <em>\E</em> могут быть использованы для
   игнорирования метасимволов регулярных выражений в шаблоне. Например:
   <em>\w+\Q.$.\E$</em> совпадет с один или более символов,
   составляющих &quot;слово&quot;,за которыми следуют символы <em>.$.</em>
   и якорь в конце строки.
  </p>

  <p class="para">
   Последовательность <em>\K</em> может быть использована для сброса
   начала совпадения начиная с версии PHP 5.2.4. Например, шаблон
   <em>foo\Kbar</em> совпадет с &quot;foobar&quot;, но сообщит о том, что
   совпал только с &quot;bar&quot;. Использование
   <em>\K</em> не мешает установке подмасок. Например, если шаблон
   <em>(foo)\Kbar</em> совпадет со строкой &quot;foobar&quot;, первой подмаской
   все равно будет являться &quot;foo&quot;.
  </p>

 </div><hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="regexp.reference.meta.html">Метасимволы</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="regexp.reference.unicode.html">Свойства Unicode-символов</a></div>
 <div class="up"><a href="reference.pcre.pattern.syntax.html">Описание синтаксиса Perl-совместимых регулярных выражений</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
